# =============================================================================
# Foundry - Production Environment Configuration
# SCALE Tier - Task T150
#
# Copy this file to .env and fill in the values
# NEVER commit the actual .env file to version control
# =============================================================================

# -----------------------------------------------------------------------------
# General Configuration
# -----------------------------------------------------------------------------
TAG=latest
NODE_ENV=production
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Application Ports
# -----------------------------------------------------------------------------
BACKEND_PORT=3000
FRONTEND_PORT=80

# -----------------------------------------------------------------------------
# Database: PostgreSQL
# -----------------------------------------------------------------------------
POSTGRES_USER=foundry
POSTGRES_PASSWORD=<STRONG_PASSWORD_HERE>
POSTGRES_DB=foundry
POSTGRES_PORT=5432
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}?schema=public

# -----------------------------------------------------------------------------
# Database: Neo4j
# -----------------------------------------------------------------------------
NEO4J_USER=neo4j
NEO4J_PASSWORD=<STRONG_PASSWORD_HERE>
NEO4J_URI=bolt://neo4j:7687
NEO4J_HTTP_PORT=7474
NEO4J_BOLT_PORT=7687

# -----------------------------------------------------------------------------
# Cache: Redis
# -----------------------------------------------------------------------------
REDIS_PASSWORD=<STRONG_PASSWORD_HERE>
REDIS_PORT=6379
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379

# -----------------------------------------------------------------------------
# Vector Database: Qdrant (Optional)
# -----------------------------------------------------------------------------
QDRANT_HTTP_PORT=6333
QDRANT_GRPC_PORT=6334

# -----------------------------------------------------------------------------
# Security: JWT & Encryption
# -----------------------------------------------------------------------------
# Generate with: openssl rand -base64 64
JWT_SECRET=<GENERATE_64_CHAR_SECRET>
JWT_REFRESH_SECRET=<GENERATE_64_CHAR_SECRET>
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=<GENERATE_64_HEX_CHARS>
SESSION_SECRET=<GENERATE_64_CHAR_SECRET>

# -----------------------------------------------------------------------------
# OAuth 2.0 / Authentication
# -----------------------------------------------------------------------------
# Microsoft Azure AD (for M365 integration)
AZURE_AD_CLIENT_ID=<YOUR_AZURE_AD_APP_CLIENT_ID>
AZURE_AD_CLIENT_SECRET=<YOUR_AZURE_AD_APP_CLIENT_SECRET>
AZURE_AD_TENANT_ID=<YOUR_AZURE_AD_TENANT_ID>

# Generic OAuth (for SSO)
OAUTH_CLIENT_ID=<OAUTH_CLIENT_ID>
OAUTH_CLIENT_SECRET=<OAUTH_CLIENT_SECRET>

# -----------------------------------------------------------------------------
# AI Services
# -----------------------------------------------------------------------------
OPENAI_API_KEY=<YOUR_OPENAI_API_KEY>
# Alternative: Azure OpenAI
# AZURE_OPENAI_ENDPOINT=https://<resource>.openai.azure.com/
# AZURE_OPENAI_KEY=<YOUR_AZURE_OPENAI_KEY>
# AZURE_OPENAI_DEPLOYMENT=<DEPLOYMENT_NAME>

# -----------------------------------------------------------------------------
# CORS & Domain Configuration
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins
CORS_ORIGINS=https://app.yourdomain.com,https://admin.yourdomain.com

# -----------------------------------------------------------------------------
# Frontend Configuration
# -----------------------------------------------------------------------------
VITE_API_URL=/api

# -----------------------------------------------------------------------------
# Monitoring (Optional)
# -----------------------------------------------------------------------------
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001
GRAFANA_PASSWORD=<STRONG_PASSWORD_HERE>

# -----------------------------------------------------------------------------
# Email Configuration
# -----------------------------------------------------------------------------
SMTP_HOST=smtp.yourdomain.com
SMTP_PORT=587
SMTP_USER=noreply@yourdomain.com
SMTP_PASSWORD=<SMTP_PASSWORD>
SMTP_FROM=Foundry <noreply@yourdomain.com>

# -----------------------------------------------------------------------------
# Storage Configuration
# -----------------------------------------------------------------------------
# For S3-compatible storage (optional)
# S3_ENDPOINT=https://s3.amazonaws.com
# S3_BUCKET=foundry-uploads
# S3_REGION=eu-central-1
# S3_ACCESS_KEY=<ACCESS_KEY>
# S3_SECRET_KEY=<SECRET_KEY>

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
ENABLE_ANALYTICS=true
ENABLE_PROCESS_DISCOVERY=true
ENABLE_AI_INSIGHTS=true
ENABLE_COMPLIANCE_MONITORING=true

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# -----------------------------------------------------------------------------
# Backup Configuration
# -----------------------------------------------------------------------------
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
# BACKUP_S3_BUCKET=foundry-backups
